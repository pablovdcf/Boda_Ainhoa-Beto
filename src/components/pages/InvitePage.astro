<main id="main-content" class="section-wrap py-10">
  <header class="surface-card overflow-hidden bg-hero text-white">
    <div class="px-6 py-12 text-center">
      <p class="text-xs uppercase tracking-[0.28em] text-sand/90">Confirmación</p>
      <h1 id="heroNames" class="mt-2 text-4xl font-semibold md:text-5xl">
        Ainhoa & Alberto
      </h1>
      <p id="heroSub" class="mt-3 text-sand/90">
        10 de octubre 2026 · Pazo Torre de Xunqueiras
      </p>
    </div>
  </header>

  <section id="tokenGate" class="surface-card mt-8 hidden p-6">
    <h2 class="text-2xl font-semibold">Tu código de invitación</h2>
    <p class="muted mt-2">
      Si has entrado sin enlace directo, introduce aquí tu token.
    </p>
    <form id="tokenForm" class="mt-4 grid gap-3 md:grid-cols-[1fr_auto]">
      <input
        id="tokenInput"
        type="text"
        inputmode="latin"
        autocomplete="off"
        placeholder="Tu código"
        class="w-full rounded-xl border border-slate-300 px-4 py-3 text-lg"
      />
      <button
        type="submit"
        class="rounded-xl bg-brand-700 px-5 py-3 text-lg font-medium text-white hover:bg-brand-800"
      >
        Continuar
      </button>
    </form>
    <p id="tokenError" class="mt-2 hidden text-sm text-rose-700">
      Código inválido. Revísalo e inténtalo de nuevo.
    </p>
  </section>

  <p id="greet" class="mt-6 text-slate-700">Cargando invitación…</p>

  <section id="alreadyBox" class="surface-card mt-6 hidden p-4">
    <p class="text-slate-700">
      Ya has confirmado:
      <span id="alreadyStatus" class="font-semibold"></span>.
    </p>
    <div class="mt-3 flex flex-wrap gap-2">
      <button
        id="btnEdit"
        type="button"
        class="rounded-full bg-brand-700 px-4 py-2 text-sm font-semibold text-white"
      >
        Modificar mi respuesta
      </button>
      <button
        id="btnKeep"
        type="button"
        class="rounded-full border border-brand-300 bg-white px-4 py-2 text-sm font-semibold text-brand-800"
      >
        Seguir igual
      </button>
    </div>
    <p class="mt-2 text-xs text-slate-500">
      Si necesitas añadir más acompañantes de los permitidos, contacta con los novios.
    </p>
  </section>

  <div id="formSkeleton" class="mt-6 grid gap-4">
    <div class="h-6 animate-pulse rounded-xl bg-slate-200"></div>
    <div class="h-10 animate-pulse rounded-xl bg-slate-200"></div>
    <div class="h-6 animate-pulse rounded-xl bg-slate-200"></div>
    <div class="h-24 animate-pulse rounded-xl bg-slate-200"></div>
    <div class="h-6 animate-pulse rounded-xl bg-slate-200"></div>
    <div class="h-32 animate-pulse rounded-xl bg-slate-200"></div>
  </div>

  <form id="rsvpForm" class="mt-6 hidden grid gap-4">
    <div class="surface-card p-4">
      <label class="block text-sm font-medium">Asistencia</label>
      <div class="mt-2 flex gap-6">
        <label class="inline-flex items-center gap-2"
          ><input type="radio" name="asistencia" value="si" required /> Sí</label
        >
        <label class="inline-flex items-center gap-2"
          ><input type="radio" name="asistencia" value="no" required /> No</label
        >
      </div>
    </div>

    <section id="titularCard" class="surface-card p-4">
      <div class="mb-3">
        <label class="block text-sm text-slate-700">
          Menú de <span id="titularMenuLabel">Invitado</span>
        </label>
        <select id="menu" class="mt-1 w-full rounded-xl border border-slate-300 p-2">
          <option value="">— Selecciona —</option>
          <option value="estandar">Estándar</option>
          <option value="vegetariano">Vegetariano</option>
          <option value="celiaco">Celíaco</option>
          <option value="infantil">Infantil</option>
          <option value="otro">Otro</option>
        </select>
      </div>
      <div class="mb-3">
        <label class="block text-sm text-slate-700">Alergias/intolerancias</label>
        <input
          id="alergias"
          type="text"
          placeholder="Marisco, gluten…"
          class="mt-1 w-full rounded-xl border border-slate-300 p-2"
        />
      </div>
      <div>
        <label class="block text-sm text-slate-700">Notas — opcional</label>
        <textarea
          id="notasTitular"
          rows="2"
          class="mt-1 w-full rounded-xl border border-slate-300 p-2"
          placeholder="Algo que debamos saber"
        ></textarea>
      </div>
    </section>

    <section class="surface-card p-4">
      <label class="block text-sm font-medium">Acompañantes</label>
      <input
        id="acompanantes"
        type="number"
        min="0"
        value="0"
        class="mt-1 w-full rounded-xl border border-slate-300 p-2"
      />
      <p id="acompanantesHelp" class="mt-1 hidden text-xs text-slate-500">
        Has alcanzado el máximo permitido por tu invitación.
      </p>
      <div id="acompanantesNombres" class="mt-2 grid gap-2"></div>
      <p id="maxInfo" class="mt-1 text-xs text-slate-500"></p>
    </section>

    <label class="hidden items-center gap-2" aria-hidden="true"
      ><input id="bus" type="checkbox" /> Me apunto al bus</label
    >

    <section class="surface-card p-4">
      <label class="block text-sm font-medium">Pide una canción</label>
      <input
        id="cancion"
        type="text"
        placeholder="Título – Artista"
        class="mt-1 w-full rounded-xl border border-slate-300 p-2"
      />
    </section>

    <button
      id="submitBtn"
      class="rounded-xl bg-brand-700 px-5 py-3 font-semibold text-white hover:bg-brand-800"
    >
      Enviar confirmación
    </button>

    <p id="msg" class="text-sm" aria-live="polite"></p>
  </form>
</main>

<div id="emailModal" class="fixed inset-0 z-50 hidden">
  <div class="absolute inset-0 bg-slate-900/60"></div>
  <div class="relative mx-auto mt-24 max-w-md px-4">
    <div class="surface-card rounded-2xl bg-white p-5">
      <h3 class="text-xl font-semibold">¿Te enviamos la confirmación?</h3>
      <p class="muted mt-2 text-sm">
        Si nos dejas tu correo podremos enviarte la confirmación y el evento del calendario.
      </p>
      <label class="mt-4 block text-sm font-medium">Tu email (opcional)</label>
      <input
        id="emailInput"
        type="email"
        placeholder="nombre@correo.com"
        class="mt-1 w-full rounded-xl border border-slate-300 p-2"
      />
      <div class="mt-5 flex gap-2">
        <button
          id="emailSaveBtn"
          class="flex-1 rounded-xl bg-brand-700 px-5 py-2.5 text-white hover:bg-brand-800"
        >
          Guardar email y continuar
        </button>
        <button
          id="emailSkipBtn"
          class="flex-1 rounded-xl border border-slate-300 px-5 py-2.5 hover:bg-slate-50"
        >
          Ahora no
        </button>
      </div>
      <p id="emailError" class="mt-2 hidden text-sm text-red-700">
        Introduce un email válido o pulsa “Ahora no”.
      </p>
    </div>
  </div>
</div>

